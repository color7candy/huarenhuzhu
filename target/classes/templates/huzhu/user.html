<!doctype html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>华人互助网 个人</title>
    <link href="/resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="/resources/css/huzhu.css" rel="stylesheet">
    <link href="/resources/css/theme.css" rel="stylesheet">
    <link href="/resources/css/index.css" rel="stylesheet">
    <link href="/resources/css/sidebars.css" rel="stylesheet">
    <style>
      td {
        max-width: 150px;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
      }
    </style>
  </head>
  <body id="body">
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="three-dots" viewBox="0 0 16 16">
        <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z">
        </path>
      </symbol>
    </svg>
    <header class="navbar navbar-expand-lg bd-navbar sticky-top">
      <nav class="container-xxl bd-gutter flex-wrap flex-lg-nowrap" aria-label="Main navigation">
        <div class="">
          <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" onclick="document.getElementById('body').style.cssText = '';" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="#ffffff" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
            </svg>
          </button>
        </div>
        <a class="navbar-brand p-0 me-0 me-lg-2" href="/huzhu/home" aria-label="">
          <svg version="1.0" xmlns="http://www.w3.org/2000/svg"width="40" height="30" viewBox="0 0 1280.000000 960.000000">
            <g transform="translate(0.000000,1160.000000) scale(0.100000,-0.150000)"fill="#ffffff" stroke="none">
              <path d="M6620 7299 c-115 -17 -235 -88 -430 -258 -201 -175 -482 -374 -615 -435 -237 -110 -535 -270 -620 -332 -33 -24 -105 -67 -160 -95 -55 -28 -114 -59 -131 -70 -29 -18 -40 -18 -224 -8 -107 6 -219 17 -249 25 -96 25 -498 10 -614 -22 -29 -8 -81 -19 -117 -24 -36 -6 -88 -22 -116 -35 -57 -28 -198 -58 -379 -81 -66 -9 -134 -22 -152 -31 -18 -8 -60 -41 -95 -72 -35 -32 -81 -64 -103 -71 -22 -7 -83 -33 -135 -58 -109 -51 -187 -74 -430 -131 -464 -108 -402 -101 -1070 -120 -212 -6 -459 -15 -550 -21 -91 -5 -225 -13 -297 -17 l-133 -6 0 -1224 0 -1223 58 -1 c31 -1 59 -1 62 -1 3 0 127 3 275 7 184 4 316 13 415 27 80 11 206 21 280 22 120 1 188 -1 455 -18 39 -2 117 -7 175 -10 304 -18 651 -85 1185 -231 72 -19 148 -39 170 -44 111 -26 352 -94 445 -126 58 -20 173 -59 255 -87 186 -62 277 -95 335 -121 178 -79 425 -172 538 -203 53 -14 174 -48 267 -76 153 -45 232 -70 475 -156 68 -24 88 -26 225 -26 200 0 410 19 483 43 67 23 275 129 342 174 52 36 323 249 360 283 37 35 77 66 145 113 33 22 103 71 155 107 128 88 149 102 221 148 33 22 67 50 75 62 8 12 43 41 77 64 34 24 71 51 82 61 11 11 52 42 90 71 39 28 86 68 106 87 54 55 114 109 231 209 120 103 102 98 233 59 64 -19 79 -29 165 -111 67 -64 116 -101 164 -124 241 -117 585 -113 1102 14 491 119 738 297 998 717 42 67 55 81 104 106 125 63 404 129 637 150 66 7 163 17 215 24 52 6 147 12 210 12 121 0 117 1 355 -75 50 -16 140 -40 200 -54 61 -13 162 -40 225 -59 63 -20 136 -38 163 -42 l47 -7 0 1291 0 1291 -42 0 c-24 0 -88 -7 -143 -15 -55 -8 -185 -22 -290 -30 -104 -9 -239 -20 -299 -26 -187 -18 -640 -16 -801 4 -318 40 -411 48 -510 42 -108 -7 -155 -18 -274 -64 -42 -17 -103 -35 -135 -41 -33 -5 -89 -23 -125 -39 -74 -33 -211 -61 -296 -61 -61 0 -184 23 -400 75 -77 19 -158 37 -180 40 -70 12 -279 95 -500 200 -38 18 -114 54 -167 79 -53 25 -100 46 -105 46 -16 0 -206 101 -405 216 -63 36 -179 86 -333 144 -55 20 -134 52 -175 69 -148 64 -286 74 -409 31 -59 -21 -80 -19 -291 35 -91 23 -217 46 -236 44 -5 -1 -34 -5 -64 -10z"/>
            </g>
          </svg>
        </a>
        <div class="">
          <button class="navbar-toggler d-lg-none order-3 p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdNavbar" aria-controls="bdNavbar" aria-label="Toggle navigation">
            <svg class="bi" aria-hidden="true"><use xlink:href="#three-dots"></use></svg>
          </button>
        </div>
        <div class="offcanvas-lg offcanvas-end flex-grow-1" tabindex="-1" id="bdNavbar" aria-labelledby="bdNavbarOffcanvasLabel" data-bs-scroll="true">
          <div class="offcanvas-header px-4 pb-0">
            <h5 class="offcanvas-title text-white" id="bdNavbarOffcanvasLabel">华人互助</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#bdNavbar">
            </button>
          </div>
          <div class="offcanvas-body p-4 pt-0 p-lg-0">
            <hr class="d-lg-none text-white-50">
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav">
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/resort">互助</a>
              </li>
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/liveorfraud">日常</a>
              </li>
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/fraud">骗子</a>
              </li>
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/report">发布</a>
              </li>
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2 active" aria-current="true" href="/huzhu/user">个人</a>
              </li>
            </ul>
            <hr class="d-lg-none text-white-50">
            <ul class="navbar-nav flex-row flex-wrap ms-md-auto" id="beforeLogin" th:if="${session.user} == null">
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/login" target="_self" rel="noopener">
                  登录
                </a>
              </li>
              <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
                <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
                <hr class="d-lg-none my-2 text-white-50">
              </li>
              <li class="nav-item col-6 col-lg-auto">
                <a class="nav-link py-2 px-0 px-lg-2" href="/huzhu/register" target="_self" rel="noopener">
                  注册
                </a>
              </li>
            </ul>
            <ul class="navbar-nav flex-row flex-wrap ms-md-auto" id="afterLogin" th:if="${session.user} != null">
              <li class="nav-item dropdown">
                <button type="button" class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
                  <img id="avatar" class="rounded-circle mr-1" width="30" height="30"
                        th:src="@{${#strings.isEmpty(session.user.imagepath)}?'http://www.huarenhuzhu.com/resources/image/defaultsalt.png':${session.user.imagepath}}"
                       alt="image">
                  <span class="d-lg-none" aria-hidden="true"></span><label id="nickname" class="text-white" th:text="@{${#strings.isEmpty(session.user.nickname)}?'&nbsp;':${session.user.nickname}}"></label><span class="visually-hidden" ></span><span class="visually-hidden"></span>
                  <input hidden="hidden" id="idData" th:value="${session.user.id}">
                  <input hidden="hidden" id="usernameData" th:value="${session.user.username}">
                  <input hidden="hidden" id="passwordData" th:value="${session.user.password}">
                  <input hidden="hidden" id="emailData" th:value="${session.user.email}">
                  <input hidden="hidden" id="nicknameData" th:value="${session.user.nickname}">
                  <input hidden="hidden" id="imagepathData" th:value="${session.user.imagepath}">
                  <input hidden="hidden" id="contactData" th:value="${session.user.contact}">
                  <input hidden="hidden" id="addressData" th:value="${session.user.address}">
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li><h6 class="dropdown-header">个人中心</h6></li>

                  <li><a class="dropdown-item" href="/huzhu/user">个人</a></li>
                  <li><a class="dropdown-item" href="/huzhu/reset">更改密码</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="/huzhu/loginout">退出登录</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <div class="modal fade" id="messageModal" data-backdrop="static">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <label id="messageModalLabel"></label>
          </div>
        </div>
      </div>
    </div>
    <div class="container-xxl bd-gutter mt-3 my-md-4 bd-layout">
      <aside class="bd-sidebar">
        <div class="offcanvas-lg offcanvas-start" tabindex="-1" id="bdSidebar" aria-labelledby="bdSidebarOffcanvasLabel">
          <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title" id="bdSidebarOffcanvasLabel">个人列表</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#bdSidebar"></button>
          </div>
          <div id="user">
          </div>
        </div>
      </aside>
      <div class="bd-masthead mb-3" id="content">
      </div>
    </div>

    <footer class="bg-dark font-weight-light text-white-55 pt-11 pb-5">
      <div class="container">
        <div class="row justify-content-md-between">
          <div class="col-md-12 col-lg-4 mb-4 mr-lg-auto">
            <a class="navbar-brand mb-3 text-white" href="/huzhu/home" aria-label="">
              <svg version="1.0" xmlns="http://www.w3.org/2000/svg"width="40" height="30" viewBox="0 0 1280.000000 960.000000">
                <g transform="translate(0.000000,1160.000000) scale(0.100000,-0.150000)"fill="#ffffff" stroke="none">
                  <path d="M6620 7299 c-115 -17 -235 -88 -430 -258 -201 -175 -482 -374 -615 -435 -237 -110 -535 -270 -620 -332 -33 -24 -105 -67 -160 -95 -55 -28 -114 -59 -131 -70 -29 -18 -40 -18 -224 -8 -107 6 -219 17 -249 25 -96 25 -498 10 -614 -22 -29 -8 -81 -19 -117 -24 -36 -6 -88 -22 -116 -35 -57 -28 -198 -58 -379 -81 -66 -9 -134 -22 -152 -31 -18 -8 -60 -41 -95 -72 -35 -32 -81 -64 -103 -71 -22 -7 -83 -33 -135 -58 -109 -51 -187 -74 -430 -131 -464 -108 -402 -101 -1070 -120 -212 -6 -459 -15 -550 -21 -91 -5 -225 -13 -297 -17 l-133 -6 0 -1224 0 -1223 58 -1 c31 -1 59 -1 62 -1 3 0 127 3 275 7 184 4 316 13 415 27 80 11 206 21 280 22 120 1 188 -1 455 -18 39 -2 117 -7 175 -10 304 -18 651 -85 1185 -231 72 -19 148 -39 170 -44 111 -26 352 -94 445 -126 58 -20 173 -59 255 -87 186 -62 277 -95 335 -121 178 -79 425 -172 538 -203 53 -14 174 -48 267 -76 153 -45 232 -70 475 -156 68 -24 88 -26 225 -26 200 0 410 19 483 43 67 23 275 129 342 174 52 36 323 249 360 283 37 35 77 66 145 113 33 22 103 71 155 107 128 88 149 102 221 148 33 22 67 50 75 62 8 12 43 41 77 64 34 24 71 51 82 61 11 11 52 42 90 71 39 28 86 68 106 87 54 55 114 109 231 209 120 103 102 98 233 59 64 -19 79 -29 165 -111 67 -64 116 -101 164 -124 241 -117 585 -113 1102 14 491 119 738 297 998 717 42 67 55 81 104 106 125 63 404 129 637 150 66 7 163 17 215 24 52 6 147 12 210 12 121 0 117 1 355 -75 50 -16 140 -40 200 -54 61 -13 162 -40 225 -59 63 -20 136 -38 163 -42 l47 -7 0 1291 0 1291 -42 0 c-24 0 -88 -7 -143 -15 -55 -8 -185 -22 -290 -30 -104 -9 -239 -20 -299 -26 -187 -18 -640 -16 -801 4 -318 40 -411 48 -510 42 -108 -7 -155 -18 -274 -64 -42 -17 -103 -35 -135 -41 -33 -5 -89 -23 -125 -39 -74 -33 -211 -61 -296 -61 -61 0 -184 23 -400 75 -77 19 -158 37 -180 40 -70 12 -279 95 -500 200 -38 18 -114 54 -167 79 -53 25 -100 46 -105 46 -16 0 -206 101 -405 216 -63 36 -179 86 -333 144 -55 20 -134 52 -175 69 -148 64 -286 74 -409 31 -59 -21 -80 -19 -291 35 -91 23 -217 46 -236 44 -5 -1 -34 -5 -64 -10z"/>
                </g>
              </svg>&nbsp;华人互助网
            </a>
            <p class="small font-weight-light mb-3">为广大华人提供一个安全可靠的平台，<br>互相帮助，共同抵制各种诈骗</p>
          </div>
          <div class="col-sm-4 col-lg-2 mb-4 order-lg-2">
            <h4 class="h6 text-white mb-3">友情链接</h4>
            <ul class="list-unstyled">
              <li class="mb-2"><a class="link-white-55" href="https://www.incnjp.com" target="_blank">小春网</a></li>
              <li class="mb-2"><a class="link-white-55" href="https://suumo.jp" target="_blank">Suumo</a></li>
              <li class="mb-2"><a class="link-white-55" href="https://www.ur-net.go.jp/" target="_blank">UR团地</a></li>
              <li class="mb-2"><a class="link-white-55" href="https://jp.mercari.com/" target="_blank">メルカリ</a></li>
            </ul>
          </div>
          <div class="col-sm-4 col-lg-2 mb-4 order-lg-3">
            <h4 class="h6 text-white mb-3">关于</h4>
            <ul class="list-unstyled">
              <li class="mb-2"><a class="link-white-55" href="/huzhu/introduction">网站协议</a></li>
              <li class="mb-2"><a class="link-white-55" href="/huzhu/about">关于我们</a></li>
            </ul>
          </div>
          <div class="col-sm-4 col-lg-3 mb-4 order-lg-4">
            <h4 class="h6 text-white mb-3">联系我们</h4>
            <ul class="list-unstyled">
              <li class="mb-2">邮箱:3351902681@qq.com</li>
              <li class="mb-2">客服微信</li>
              <li class="mb-2"><img width="100" height="100" src="http://www.huarenhuzhu.com/resources/image/wechat.png"/></li>
            </ul>
          </div>
        </div>
        <hr class="my-5 opacity-10">
        <div class="col text-md-center">
          <p class="small font-weight-light mb-0">© 2023
            <a class="link-white-55" href="/huzhu/home">&nbsp;&nbsp;华人互助网</a>
          </p>
        </div>
      </div>
    </footer>
  </body>
<script src="/resources/js/bootstrap.bundle.min.js"></script>
<script src="/resources/js/index.js"></script>
<script src="/resources/js/jquery.js"></script>
<script src="/resources/js/sidebars.js"></script>
<script>
  var area = $("#area");
  var city = $("#city");
  var type = $("#type");
  var proHtml = '';
  $.get("/resources/json/japaneseAdress.json", function (data) {
    proHtml += '<option value="0">不限</option>';
    for (var i = 0; i < data.length; i++) {
      proHtml += '<option value="' + data[i].code + '">' + data[i].name + '</option>';
    }
    area.html(proHtml);
    proHtml="";
  })
  area.bind("change",function (){
    $.get("/resources/json/japaneseAdress.json", function (data) {

      proHtml += '<option value="0">不限</option>';
      for (var i = 0; i < data.length; i++) {
        if (data[i].code == area.val()){
          var citydata = data[i].childs;
          for (let j = 0; j < citydata.length; j++) {
            proHtml += '<option value="' + citydata[j].code + '">' + citydata[j].name + '</option>';
          }
        }
      }
      city.html(proHtml);
      proHtml="";
    })
  })
  $.get("/menu/searchmenu", function (rs) {
    var user = "";
    for (var i = 0; i < rs.data.length; i++) {
      var type = rs.data[i].type.slice(2);
      if (user.length<=0){
        user += "<nav class=\"bd-links w-100\" id=\"bd-docs-nav\" aria-label=\"Docs navigation\">\n" + "<ul class=\"bd-links-nav list-unstyled mb-0 pb-3 pb-md-2 pe-lg-2\">\n" + "<li class=\"mb-1\">";
        user +="<button class=\"btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed\" data-bs-toggle=\"collapse\" data-bs-target=\"#" +"usercollapse"+ i+ "\" aria-expanded=\"true\">" + type + "</button><div class=\"collapse show\" id=\"" +"usercollapse"+ i+ "\" style=\"\">\n" + "<ul class=\"btn-toggle-nav list-unstyled fw-normal pb-1 small\">\n" + "<li><a id=\"" +"user"+ rs.data[i].id + "\" href='#' onclick='changecontent(" +JSON.stringify(rs.data[i]).replace(/'/g,"&quot;")+ ");' class=\"bd-links-link d-inline-block rounded active\" aria-current=\"page\">" + rs.data[i].title + "</a></li>";
      }else {
        if (rs.data[i].type != rs.data[i-1].type){
          user +="</ul>\n" + "</div>\n" + "</li>\n" + "<li class=\"mb-1\">\n" + "<button class=\"btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed\" data-bs-toggle=\"collapse\" data-bs-target=\"#" +"usercollapse"+ i+ "\" aria-expanded=\"false\">" + type + "</button>\n" + "<div class=\"collapse\" id=\"" +"usercollapse"+ i+ "\" style=\"\">\n" + "<ul class=\"btn-toggle-nav list-unstyled fw-normal pb-1 small\">\n" + "<li><a id=\"" +"user"+ rs.data[i].id + "\" href='#' onclick='changecontent(" + JSON.stringify(rs.data[i]).replace(/'/g,"&quot;") + ");' class=\"link-dark d-inline-flex text-decoration-none rounded\">" + rs.data[i].title+ "</a></li>";
        }else {
          user += "<li><a id=\"" +"user"+ rs.data[i].id + "\" href='#' onclick='changecontent(" + JSON.stringify(rs.data[i]).replace(/'/g,"&quot;") + ");' class=\"link-dark d-inline-flex text-decoration-none rounded\">" + rs .data[i].title+ "</a></li>";
        }
      }
    }
    user +=" </ul>\n" + "</div>\n" + "</li>\n" + "</ul>\n" + "</nav>";
    $('#user').html(user);
    changecontent(rs.data[0]);
  })
  function chooseFile() {
    document.getElementById('fileToUpload').click();
  }
  function uploadFile() {
    var fileInput = document.getElementById("fileToUpload");
    var file = fileInput.files[0];
    if (file.type.indexOf('image') === -1) {
      alert('请选择图片文件！');
      return;
    }
    var formData = new FormData();
    formData.append("file", file);
    fetch('/user/upload?time='+new Date(), {method: 'POST', body: formData})
            .then(response => response.text())
            .then(result => {
              rs = JSON.parse(result);
              if (rs.isError == "true"){
                alert("图片上传错误");
              }else {
                $("#avatar").attr("src", rs.path);
                $("#useravatar").attr("src", rs.path);
                $("#imagepathData").val(rs.path);
              }
            }).catch(error => {
                alert("图片上传错误");
            });
  }
  var currentPage = 1;
  var totalPage = 0;
  var limit = 30;
  var typeStr = "";
  function changecontent(data) {
    var active = $("a.bd-links-link");
    active.removeClass('active').removeClass('d-inline-block').removeClass('bd-links-link');
    active.addClass('link-dark').addClass('d-inline-flex').addClass('text-decoration-none ');

    var id = "#user" + data.id;
    if (!$(id).hasClass('active')) {
      $(id).addClass('active').addClass('d-inline-block').addClass('bd-links-link');
      $(id).removeClass('link-dark').removeClass('d-inline-flex').removeClass('text-decoration-none ');
    }

    if (data.title == "个人") {
      var imagepathData = $("#imagepathData").val();
      if (imagepathData.length <= 0) {
        imagepathData = "http://www.huarenhuzhu.com/resources/image/defaultsalt.png";
      }
      var addressData = $("#addressData").val();
      var userarea = "";
      var usercity = "";
      if (addressData.length > 0) {
        if (addressData.split("-").length > 1) {
          userarea = addressData.split("-")[0];
          usercity = addressData.split("-")[1];
        } else {
          userarea = addressData.split("-")[0];
          usercity = "不限";
        }
      } else {
        userarea = "不限";
        usercity = "不限";
      }
      var contactData = $("#contactData").val();
      if (contactData.length <= 0) {
        contactData = "";
      }
      var nicknameData = $("#nicknameData").val();
      if (nicknameData.length <= 0) {
        nicknameData = "";
      }
      var proHtml = "";
      proHtml += " <div style=\"width: 90%;margin-left: 5%;\">\n" + "<form class=\"needs-validation\" id=\"changeform\" enctype=\"multipart/form-data\" onsubmit=\"return false\" novalidate>\n" + "<div class=\"form-floating mb-3 text-center\">\n" + "<img class=\"rounded-circle mr-1\" style=\"width: 100px;height: 100px;background-color: white;\" alt=\"image\" onclick=\"chooseFile()\" id=\"useravatar\"\n" + "src=\"" + imagepathData + "\">\n" + "<input type=\"file\" id=\"fileToUpload\" style=\"display: none;\" onchange=\"uploadFile()\" />\n" + "</div>\n" + "<div class=\"form-floating mb-3\">\n" + "<button class=\"w-100 mb-2 btn btn-lg rounded-3 btn-primary\" onclick=\"chooseFile();\"> 掐指一算，我要换一个头像了</button>\n" + "</div>\n" + "<div class=\"col-lg-12\">\n" + "<label id=\"userusername\" style=\"color: rgb(9, 105, 218);\">用户名:" + $("#usernameData").val() + "</label>\n" + "</div> <br>\n" + "<div class=\"col-lg-12\">\n" + "<label id=\"useremail\" style=\"color: rgb(9, 105, 218);\">邮箱:" + $("#emailData").val() + "</label>\n" + "</div><br>\n" + "<div class=\"form-floating mb-3\">\n" + "<input type=\"input\" class=\"form-control rounded-3\" name=\"usernickname\" id=\"usernickname\" placeholder=\"\">\n" + " <label for=\"usernickname\">昵称:" + nicknameData + "</label>\n" + "</div>\n" + "<div class=\"form-floating mb-3\">\n" + "<input type=\"input\" class=\"form-control rounded-3\" name=\"usercontact\" id=\"usercontact\" placeholder=\"\">\n" + "<label for=\"usercontact\">联系方式:" + contactData + "</label>\n" + "</div>\n" + "<div class=\"form-floating col-lg-12 row mb-3\">\n" + "<div class=\"dropdown col-sm-7\">\n" + "<div class=\"row col-lg-12\">\n" + "<div class=\"text-md-center col-sm-2\" style=\"margin-top: 1%;\">\n" + "<label class=\"\">地址：</label>\n" + "</div>\n" + "<div class=\"col-sm-9\">\n" + "<select class=\"form-select\" id=\"userarea\">\n" + "<option value=\"0\">不限</option>\n" + "</select>\n" + "</div>\n" + "</div>\n" + "</div>\n" + "<div class=\"dropdown col-sm-5\">\n" + "<select class=\"form-select\" id=\"usercity\">\n" + "<option value=\"0\">不限</option>\n" + "</select>\n" + "</div>\n" + "</div>\n" + "<button class=\"w-100 mb-2 btn btn-lg rounded-3 btn-primary\" id=\"changeBtn\">变更信息</button>\n" + "</form>\n" + "</div>";
      $("#content").html(proHtml);
      var area = $("#userarea");
      var city = $("#usercity");
      proHtml = '';
      $.get("/resources/json/japaneseAdress.json", function (data) {
        var selectindex = 0;
        proHtml += '<option value="0">不限</option>';
        for (var i = 0; i < data.length; i++) {
          if (userarea == data[i].name) {
            selectindex = i;
            proHtml += '<option selected="selected" value="' + data[i].code + '">' + data[i].name + '</option>';
          } else {
            proHtml += '<option value="' + data[i].code + '">' + data[i].name + '</option>';
          }
        }
        area.html(proHtml);
        proHtml = "";
        proHtml += '<option value="0">不限</option>';
        for (var i = 0; i < data.length; i++) {
          if (selectindex > 0 && selectindex < data.length) {
            var citydata = data[selectindex].childs;
            for (let j = 0; j < citydata.length; j++) {
              if (usercity == citydata[j].name) {
                proHtml += '<option selected="selected" value="' + citydata[j].code + '">' + citydata[j].name + '</option>';
              } else {
                proHtml += '<option value="' + citydata[j].code + '">' + citydata[j].name + '</option>';
              }
            }
          }
        }
        city.html(proHtml);
        proHtml = "";
      })
      area.bind("change", function () {
        $.get("/resources/json/japaneseAdress.json", function (data) {
          proHtml += '<option value="0">不限</option>';
          for (var i = 0; i < data.length; i++) {
            if (data[i].code == area.val()) {
              var citydata = data[i].childs;
              for (let j = 0; j < citydata.length; j++) {
                proHtml += '<option value="' + citydata[j].code + '">' + citydata[j].name + '</option>';
              }
            }
          }
          city.html(proHtml);
          proHtml = "";
        })
      })
      var changeBtn    =   $("#changeBtn");
      changeBtn.bind("click",function() {
        var param = {
          username: $("#usernameData").val(),
          password: $("#passwordData").val(),
          imagepath: $("#imagepathData").val(),
          nickname: $("#usernickname").val(),
          contact: $("#usercontact").val(),
          area: $("#userarea option:selected").text(),
          city: $("#usercity option:selected").text()
        };
        changeBtn.text("变更中...").attr("disabled", "disabled").addClass("disabled");
        $.post("/user/changeuser", param, function (rs) {
          changeBtn.text("变更信息").attr("disabled", false).removeClass("disabled");
          if (rs.code != 200) {
            $("#messageModalLabel").text("抱歉，信息修改失败");
            $('#messageModal').modal('show');
            setTimeout(function () {
              $('#messageModal').modal('hide');
            }, 3000);
          } else {
            $("#messageModalLabel").text("恭喜，信息修改成功");
            $('#messageModal').modal('show');
            setTimeout(function () {
              $('#messageModal').modal('hide');
              location.href="/huzhu/user";
            }, 3000);
          }
        })
      })
    }
    if (data.title == "互助") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover\">\n" + "<tbody id=\"tablebody\">\n" + "\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id = \"pagelink\">\n" + "\n" + "</nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchresort();
      typeStr = "resort";
    }
    if (data.title == "日常") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover text-center\">\n" + "\n" + "<thead>\n" + "<tr>\n" + "<th data-field=\"type\">类型</th>\n" + "<th data-field=\"title\">标题</th>\n" + "<th data-field=\"content\">内容</th>\n" + "<th data-field=\"tips\">如何做</th>\n" + "<th data-field=\"image\">图片</th>\n" + "<th data-field=\"operate\">操作</th>\n" + "</tr>\n" + "</thead>\n" + "<tbody id=\"tablebody\">\n" + "</tbody>\n" + "\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id=\"pagelink\">\n" + "\n" + "</nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchliveorfraud();
      typeStr = "liveorfraud";
    }
    if (data.title == "骗子") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover\">\n" + "<tbody id=\"tablebody\">\n" + "\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id = \"pagelink\">\n" + "\n" + "</nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchfraud();
      typeStr = "fraud";
    }
    if (data.title == "系统") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+= "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover text-center\">\n" + "\n" + "<thead>\n" + "<tr>\n" + "<th data-field=\"type\">来自</th>\n" + "<th data-field=\"title\">内容</th>\n" + "<th data-field=\"content\">图片</th>\n" + "<th data-field=\"tips\">时间</th></tr>\n" + "</thead>\n" + "<tbody id=\"tablebody\">\n</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id=\"pagelink\"> </nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchsystem();
      typeStr = "system";
    }
    if (data.title == "私信") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover text-center\">\n" + "\n" + "<thead>\n" + "<tr>\n" + "<th data-field=\"from\">来自</th>\n" + "<th data-field=\"title\">内容</th>\n"  + "<th data-field=\"content\">图片</th>\n" + "<th data-field=\"to\">到</th>\n" + "<th data-field=\"tips\">时间</th>\n" + "<th data-field=\"operate\" data-formatter=\"operateFormatter\">操作</th>\n" + "</tr>\n" + "</thead>\n" + "<tbody id=\"tablebody\">\n" + "\n" + "\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id=\"pagelink\"> </nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchprivate();
      typeStr = "private";
    }
    if (data.title == "评论") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover text-center\">\n" + "\n" + "<thead>\n" + "<tr>\n" + "<th data-field=\"from\">来自</th>\n" + "<th data-field=\"content\">内容</th>\n" + "<th data-field=\"image\">图片</th>\n" + "<th data-field=\"to\">到</th>\n" + "<th data-field=\"time\">时间</th>\n" + "<th data-field=\"contentimg\">帖子图片</th>\n" + "<th data-field=\"contenttitle\">帖子主题</th>\n" + "<th data-field=\"operate\" data-formatter=\"operateFormatter\">操作</th>\n" + "</tr>\n" + "</thead>\n" + "<tbody id=\"tablebody\">\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id=\"pagelink\"> </nav>\n" + "</div>\n";
      $("#content").html(proHtml);
      proHtml = "";
      searchcontent();
      typeStr = "content";
    }
    if (data.title == "点赞") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover\">\n" + "<tbody id=\"tablebody\">\n" + "\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id = \"pagelink\">\n" + "\n" + "</nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchisStar1();
      typeStr = "istar1";
    }
    if (data.title == "收藏") {
      currentPage = 1;
      totalPage = 0;
      limit = 30;
      var proHtml ="";
      proHtml+="<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<table class=\"table table-hover\">\n" + "<tbody id=\"tablebody\">\n" + "\n" + "</tbody>\n" + "</table>\n" + "</div>\n" + "<div class=\"\" style=\"margin-left: 8px !important; margin-right: 8px !important;\">\n" + "<nav id = \"pagelink\">\n" + "\n" + "</nav>\n" + "</div>";
      $("#content").html(proHtml);
      proHtml = "";
      searchisStar2();
      typeStr = "istar2";
    }
  }
  function pageprevious() {
    currentPage = currentPage - 1;
    if (typeStr == "resort"){
      searchresort();
    }else if (typeStr =="fraud"){
      searchfraud();
    }else if (typeStr =="liveorfraud"){
      searchliveorfraud();
    }else if (typeStr =="system"){
      searchsystem();
    }else if (typeStr =="private"){
      searchprivate();
    } else if (typeStr =="content"){
      searchcontent();
    } else if (typeStr =="istar1"){
      searchisStar1();
    } else if (typeStr =="istar2"){
      searchisStar2();
    }

  }
  function pageindex(index) {
    if (index > 0){
      currentPage = index;
    }
    if (typeStr == "resort"){
      searchresort();
    }else if (typeStr =="fraud"){
      searchfraud();
    }else if (typeStr =="liveorfraud"){
      searchliveorfraud();
    }else if (typeStr =="system"){
      searchsystem();
    }else if (typeStr =="private"){
      searchprivate();
    } else if (typeStr =="content"){
      searchcontent();
    } else if (typeStr =="istar1"){
      searchisStar1();
    } else if (typeStr =="istar2"){
      searchisStar2();
    }
  }
  function pagenext() {
    currentPage = currentPage + 1;
    if (typeStr == "resort"){
      searchresort();
    }else if (typeStr =="fraud"){
      searchfraud();
    }else if (typeStr =="liveorfraud"){
      searchliveorfraud();
    }else if (typeStr =="system"){
      searchsystem();
    }else if (typeStr =="private"){
      searchprivate();
    } else if (typeStr =="content"){
      searchcontent();
    } else if (typeStr =="istar1"){
      searchisStar1();
    } else if (typeStr =="istar2"){
      searchisStar2();
    }
  }
  function pageonclick() {
    var pageindex = $("#pageindex").val();
    pageindex = parseInt(pageindex);
    if (pageindex > 0 && pageindex <= totalPage){
      currentPage = pageindex;
      if (typeStr == "resort"){
        searchresort();
      }else if (typeStr =="fraud"){
        searchfraud();
      }else if (typeStr =="liveorfraud"){
        searchliveorfraud();
      }else if (typeStr =="system"){
        searchsystem();
      } else if (typeStr =="private"){
        searchprivate();
      } else if (typeStr =="content"){
        searchcontent();
      } else if (typeStr =="istar1"){
        searchisStar1();
      } else if (typeStr =="istar2"){
        searchisStar2();
      }
    }
  }
  function searchisStar1() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/star/searchstar1",param,function(rs) {
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        if (rs.data[i].type == "resort") {
          var contentcontent;
          $.ajaxSettings.async=false;
          $.post("/resort/searchresortbystarid",{"id":rs.data[i].starid},function(rs){
            contentcontent = rs.data;
          })
          $.ajaxSettings.async=true;
          var resortTime = new Date(contentcontent.resortTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - resortTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = contentcontent.resortTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff + "小时前";
          } else {
            timeresult = "刚刚";
          }
          var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
          if (contentcontent.imagepath.length > 0) {
            imagepath = contentcontent.imagepath;
          }
          var title = "未知";
          if (contentcontent.title.length > 0) {
            title = contentcontent.title;
          }
          var resortType = "未知";
          if (contentcontent.resortType.length > 0) {
            resortType = contentcontent.resortType;
          }
          var resortName = "未知";
          if (contentcontent.resortName.length > 0) {
            resortName = contentcontent.resortName;
          }
          var address = "未知";
          if (contentcontent.address.length > 0) {
            address = contentcontent.address;
          }
          proHtml += "<tr onclick='toresortinfo(" + contentcontent.id + ");'>\n" + "<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" + imagepath + "\"></td>\n" + "<td height=\"100\">\n" + "<h2>" + title + "<a class=\"btn btn-danger rounded-circle\" id=\"isStar33\" onclick=\"isStar1(" + contentcontent.id + ",'resort');\" style=\"float: right; margin-right: 1% !important; padding: 3px 6px !important;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hand-thumbs-up\" viewBox=\"0 0 16 16\" style=\"width: 30px !important; height: 30px !important;\">\n" +
                  "<path d=\"M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z\"></path>\n" +
                  "</svg></a>" + "</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg><label>" + resortType + "</label></p>\n" + "<p class=\"\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg>" + address + "<label style=\"float:right\">" + " 发布于" + timeresult + "</label></p>\n" + "</td>\n" + "</tr>";

        }else {
          var contentcontent;
          $.ajaxSettings.async=false;
          $.post("/fraud/searchfraudbystarid",{"id":rs.data[i].starid},function(rs){
            contentcontent = rs.data;
          })
          $.ajaxSettings.async=true;
          var timeresult = "未知";
          if (contentcontent.fraudTime.length > 0){
            var fraudTime = new Date(contentcontent.fraudTime);
            var currentTime = new Date();
            var timeDiff = currentTime.getTime() - fraudTime.getTime();
            var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
            var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
            if (weeksDiff > 0) {
              timeresult = contentcontent.fraudTime.substring(0, 10);
            } else if (daysDiff > 0) {
              timeresult = daysDiff + "天前";
            } else if (hoursDiff > 0) {
              timeresult = hoursDiff +"小时前";
            } else {
              timeresult = "刚刚";
            }
          }
          var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
          if (contentcontent.imagepath.length > 0){
            imagepath = contentcontent.imagepath;
          }
          var title = "未知";
          if (contentcontent.title.length > 0){
            title = contentcontent.title;
          }
          var fraudType = "未知";
          if (contentcontent.fraudType.length > 0){
            fraudType = contentcontent.fraudType;
          }
          var fraudName = "未知";
          if (contentcontent.fraudName.length > 0){
            fraudName = contentcontent.fraudName;
          }
          var fraudCount = "未知";
          if (contentcontent.amount.length > 0){
            fraudCount = contentcontent.amount;
          }
          var address = "未知";
          if (contentcontent.address.length > 0){
            address = contentcontent.address;
          }
          proHtml += "<tr onclick='tofraudinfo(" +  contentcontent.id + ");' >\n" + "<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" +imagepath + "\"></td>\n" + "<td height=\"100\">\n" + "<h2>" + title + "<a class=\"btn btn-danger rounded-circle\" id=\"isStar33\" onclick=\"isStar1(" + contentcontent.id+ ",'fraud');\" style=\"float: right; margin-right: 1% !important; padding: 3px 6px !important;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hand-thumbs-up\" viewBox=\"0 0 16 16\" style=\"width: 30px !important; height: 30px !important;\">\n" +
                  "<path d=\"M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z\"></path>\n" +
                  "</svg></a>"  +"</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg>" + fraudType + " <label style=\"float:right\">诈骗金额：" + fraudCount + "</label></p>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg> " + address + " <label style=\"float:right\"> " + " 发布于:" +timeresult+ "</label></p>\n" + "</td>\n" + "</tr>";
        }
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  function isStar1(index,type) {
      isStarClick = 1;
      var param = {
        username: $("#usernameData").val(),
        password: $("#passwordData").val(),
        typeid  : index,
        isadd   : "0",
        isStar  : "1",
        type    : type,
      }
      $.post("/star/changeStar",param,function(rs){
        if (rs.code != 200) {
          $("#messageModalLabel").text("抱歉，点赞取消失败");
          $('#messageModal').modal('show');
          setTimeout(function () {
            $('#messageModal').modal('hide');
          }, 3000);
        } else {
          $("#messageModalLabel").text("恭喜，点赞取消成功");
          $('#messageModal').modal('show');
          setTimeout(function () {
            searchisStar1();
            $('#messageModal').modal('hide');
          }, 3000);
        }
        isStarClick = 0;
      })
  }
  function searchisStar2() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/star/searchstar2",param,function(rs) {
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        if (rs.data[i].type == "resort") {
          var contentcontent;
          $.ajaxSettings.async=false;
          $.post("/resort/searchresortbystarid",{"id":rs.data[i].starid},function(rs){
            contentcontent = rs.data;
          })
          $.ajaxSettings.async=true;
          var resortTime = new Date(contentcontent.resortTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - resortTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = contentcontent.resortTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff + "小时前";
          } else {
            timeresult = "刚刚";
          }
          var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
          if (contentcontent.imagepath.length > 0) {
            imagepath = contentcontent.imagepath;
          }
          var title = "未知";
          if (contentcontent.title.length > 0) {
            title = contentcontent.title;
          }
          var resortType = "未知";
          if (contentcontent.resortType.length > 0) {
            resortType = contentcontent.resortType;
          }
          var resortName = "未知";
          if (contentcontent.resortName.length > 0) {
            resortName = contentcontent.resortName;
          }
          var address = "未知";
          if (contentcontent.address.length > 0) {
            address = contentcontent.address;
          }
          proHtml += "<tr onclick='toresortinfo(" + contentcontent.id + ");'>\n" + "<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" + imagepath + "\"></td>\n" + "<td height=\"100\">\n" + "<h2>" + title +" <a class=\"btn " + "btn-info" + "\" id='isStar"  + "' onclick='isStar2(" + contentcontent.id + ",\"resort\")' style=\"float:right;margin-right: 1% !important;\">" +"已收藏"+ "</a>  " + "</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg><label>" + resortType + "</label></p>\n" + "<p class=\"\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg>" + address + "<label style=\"float:right\">" + " 发布于" + timeresult + "</label></p>\n" + "</td>\n" + "</tr>";

        }else {
          var contentcontent;
          $.ajaxSettings.async=false;
          $.post("/fraud/searchfraudbystarid",{"id":rs.data[i].starid},function(rs){
            contentcontent = rs.data;
          })
          $.ajaxSettings.async=true;
          var timeresult = "未知";
          if (contentcontent.fraudTime.length > 0){
            var fraudTime = new Date(contentcontent.fraudTime);
            var currentTime = new Date();
            var timeDiff = currentTime.getTime() - fraudTime.getTime();
            var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
            var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
            if (weeksDiff > 0) {
              timeresult = contentcontent.fraudTime.substring(0, 10);
            } else if (daysDiff > 0) {
              timeresult = daysDiff + "天前";
            } else if (hoursDiff > 0) {
              timeresult = hoursDiff +"小时前";
            } else {
              timeresult = "刚刚";
            }
          }
          var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
          if (contentcontent.imagepath.length > 0){
            imagepath = contentcontent.imagepath;
          }
          var title = "未知";
          if (contentcontent.title.length > 0){
            title = contentcontent.title;
          }
          var fraudType = "未知";
          if (contentcontent.fraudType.length > 0){
            fraudType = contentcontent.fraudType;
          }
          var fraudName = "未知";
          if (contentcontent.fraudName.length > 0){
            fraudName = contentcontent.fraudName;
          }
          var fraudCount = "未知";
          if (contentcontent.amount.length > 0){
            fraudCount = contentcontent.amount;
          }
          var address = "未知";
          if (contentcontent.address.length > 0){
            address = contentcontent.address;
          }
          proHtml += "<tr onclick='tofraudinfo(" +  contentcontent.id + ");' >\n" + "<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" +imagepath + "\"></td>\n" + "<td height=\"100\">\n" + "<h2>" + title + " <a class=\"btn " + "btn-info" + "\" id='isStar"  + "' onclick='isStar2(" + contentcontent.id + ",\"fraud\")' style=\"float:right;margin-right: 1% !important;\">" +"已收藏"+ "</a>  "  +"</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg>" + fraudType + " <label style=\"float:right\">诈骗金额：" + fraudCount + "</label></p>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg> " + address + " <label style=\"float:right\"> " + " 发布于:" +timeresult+ "</label></p>\n" + "</td>\n" + "</tr>";
        }
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  function isStar2(index,type) {
    isStarClick = 1;

    var param = {
      username: $("#usernameData").val(),
      password: $("#passwordData").val(),
      typeid : index,
      isadd   : "0",
      isStar  : "2",
      type    : type,
    }
    $.post("/star/changeStar",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，收藏取消失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，收藏取消成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchisStar2();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })

  }

  function searchcontent() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/content/searchcontent",param,function(rs){
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        var timeresult = "未知";
        if (rs.data[i].contentTime.length > 0){
          var contentTime = new Date(rs.data[i].contentTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - contentTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = rs.data[i].contentTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff +"小时前";
          } else {
            timeresult = "刚刚";
          }
        }
        var contentImage = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].contentImage.length > 0){
          contentImage = rs.data[i].contentImage;
        }
        var content = "未知";
        if (rs.data[i].content.length > 0){
          content = rs.data[i].content;
        }
        var from = "未知";
        if ($("#idData").val() == rs.data[i].userid){
          from = $("#nicknameData").val();
        }else {
          from = searchuserbyid(rs.data[i].contentid);
        }
        var to = "未知";
        if ($("#idData").val() == rs.data[i].contentid){
          to = $("#nicknameData").val();
        }else {
          to = searchuserbyid(rs.data[i].userid);
        }
        var contentcontent = searchcontentbyidandtype(rs.data[i].contentid,rs.data[i].contentType);
        proHtml += "<tr onclick=\"tocontent('" +rs.data[i].contentid+"','"+rs.data[i].contentType+ "');\">\n" + "<td>\n" + "<label>" + from+ "</label>\n" + "</td>\n" + "<td>\n" + "<label>" + content+ "</label>\n" + "</td>\n" + "<td><img class=\"rounded-3\" width=\"50\" height=\"50\" src=\"" + contentImage+ "\"></td>\n" + "<td>\n" + "<label>" +to+ "</label>\n" + "</td>\n" + "<td>\n" + "<label>" +timeresult+ "</label>\n" + "</td>\n" + "<td><img class=\"rounded-3\" width=\"50\" height=\"50\" src=\"" + contentcontent.imagepath+ "\"></td>\n" + "<td>\n" + "<label>" +contentcontent.title + "</label>\n" + "</td>\n" + "<td>\n" + "<a class=\"btn btn-secondary\" id=\"\" onclick=\"contentdelete(" + rs.data[i].id + ")\">删除</a>\n" + "</td>\n" + "</tr>  ";
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  
  function searchcontentbyidandtype(id,type) {
    var param = {
      id  : id,
      type:type
    }
    var contentcontent = "";
    $.ajaxSettings.async = false;
    $.post("/content/searchcontentbyidandtype",param,function(rs){
      contentcontent = rs.data;
    })
    $.ajaxSettings.async = true;
    if (contentcontent == null){
      contentcontent = {"title":"未知","imagepath":"http://www.huarenhuzhu.com/resources/image/noimage.png"};
    }
    return contentcontent;
  }

  function searchprivate() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/content/searchprivate",param,function(rs){
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        var timeresult = "未知";
        if (rs.data[i].contentTime.length > 0){
          var contentTime = new Date(rs.data[i].contentTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - contentTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = rs.data[i].contentTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff +"小时前";
          } else {
            timeresult = "刚刚";
          }
        }
        var contentImage = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].contentImage.length > 0){
          contentImage = rs.data[i].contentImage;
        }
        var content = "未知";
        if (rs.data[i].content.length > 0){
          content = rs.data[i].content;
        }
        var from = "未知";
        if ($("#idData").val() == rs.data[i].userid){
            from = $("#nicknameData").val();
        }else {
          from = searchuserbyid(rs.data[i].contentid);
        }
        var to = "未知";
        if ($("#idData").val() == rs.data[i].contentid){
          to = $("#nicknameData").val();
        }else {
          to = searchuserbyid(rs.data[i].userid);
        }
        proHtml += "<tr onclick=\"toprivate(" + rs.data[i].id + ");\">\n" + "<td>\n" + "<label>" + from+ "</label>\n" + "</td>\n" + "<td>\n" + "<label>" + content+ "</label>\n" + "</td>" + "<td><img class=\"rounded-3\" width=\"50\" height=\"50\" src=\"" + contentImage + "\"></td>"+"<td>\n" + "<label>" + to+ "</label>\n" + "</td>"  + "<td>\n" + "<label>" +timeresult+ "</label>\n" + "</td>\n" + "<td>\n" + "<a class=\"btn btn-secondary\" id=\"\" onclick=\"privatedelete(" +rs.data[i].id + ")\">删除</a>\n" + "</td>\n" + "</tr>  ";
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  function searchuserbyid(id){
    var param = {
      userid  : id
    }
    var nickname = "";
    $.ajaxSettings.async = false;
    $.post("/user/searchuserbyid",param,function(rs){
      nickname = rs.username;
    })
    $.ajaxSettings.async = true;
    if (nickname == null || nickname.length <= 0){
      nickname = "未知";
    }
    return nickname;
  }
  function searchsystem() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/content/searchsystem",param,function(rs){
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        var timeresult = "未知";
        if (rs.data[i].contentTime.length > 0){
          var contentTime = new Date(rs.data[i].contentTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - contentTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = rs.data[i].contentTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff +"小时前";
          } else {
            timeresult = "刚刚";
          }
        }
        var contentImage = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].contentImage.length > 0){
          contentImage = rs.data[i].contentImage;
        }
        var content = "未知";
        if (rs.data[i].content.length > 0){
          content = rs.data[i].content;
        }
        proHtml += "<tr onclick=\"tosystem(" + rs.data[i].id+ ");\">\n" + "<td>\n" + "<label>" + "系统" + "</label>\n" + "</td>\n" + "<td>\n" + "<label>" + content + "</label>\n" + "</td><td><img class=\"rounded-3\" width=\"50\" height=\"50\" src=\"" + contentImage+ "\"></td><td>\n" + "<label>" + timeresult + "</label>\n" + "</td>\n" + "</tr>";
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  function searchliveorfraud() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/liveorfraud/searchliveorfraudbyuser",param,function(rs){
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].imagepath.length > 0){
          imagepath = rs.data[i].imagepath;
        }
        var title = "未知";
        if (rs.data[i].title.length > 0){
          title = rs.data[i].title;
        }
        var type = "未知";
        if (rs.data[i].type.length > 0){
          var type = rs.data[i].type;
        }
        var description = "未知";
        if (rs.data[i].description.length > 0){
          description = rs.data[i].description;
        }
        var precaution = "未知";
        if (rs.data[i].precaution.length > 0){
          precaution = rs.data[i].precaution;
        }
        proHtml += " <tr onclick=\"toliveorfraud(" +rs.data[i].id+ ");\">\n" + "<td>\n" + "<label>" +type+ "</label>\n" + "</td>\n" + "<td>\n" + "<label>" + title+ "</label>\n" + "\t</td>\n" + "<td>\n" + "<label>" +description + "</label>\n" + "</td><td>\n" + "<label>" + precaution+ "</label>\n" + "</td><td><img class=\"rounded-3\" width=\"50\" height=\"50\" src=\"" + imagepath+ "\"></td>\n" + "<td>\n" + "<a class=\"btn btn-secondary\" id=\"\" onclick=\"liveorfrauddelete(" +rs.data[i].id + ")\">删除</a>\n" + "</td>\n" + "</tr>";
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }

  function searchfraud() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/fraud/searchfraudbyuser",param,function(rs){
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      var proHtml = "";
      for (let i = 0; i < rs.data.length; i++) {
        var timeresult = "未知";
        if (rs.data[i].fraudTime.length > 0){
          var fraudTime = new Date(rs.data[i].fraudTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - fraudTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = rs.data[i].fraudTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff +"小时前";
          } else {
            timeresult = "刚刚";
          }
        }
        var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].imagepath.length > 0){
          imagepath = rs.data[i].imagepath;
        }
        var title = "未知";
        if (rs.data[i].title.length > 0){
          title = rs.data[i].title;
        }
        var fraudType = "未知";
        if (rs.data[i].fraudType.length > 0){
          fraudType = rs.data[i].fraudType;
        }
        var fraudName = "未知";
        if (rs.data[i].fraudName.length > 0){
          fraudName = rs.data[i].fraudName;
        }
        var fraudCount = "未知";
        if (rs.data[i].amount.length > 0){
          fraudCount = rs.data[i].amount;
        }
        var address = "未知";
        if (rs.data[i].address.length > 0){
          address = rs.data[i].address;
        }
        proHtml += "<tr onclick='tofraudinfo(" +  rs.data[i].id + ");' >\n" + "<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" +imagepath + "\"></td>\n" + "<td height=\"100\">\n" + "<h2>" + title + "<a class=\"btn btn-secondary\" id=\"frauddelete" +rs.data[i].id+ "\" onclick=\"frauddelete(" + rs.data[i].id+ ")\" style=\"float:right;margin-right: 1% !important;\">删除</a>"+"</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg>" + fraudType + " <label style=\"float:right\">诈骗金额：" + fraudCount + "</label></p>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg> " + address + " <label style=\"float:right\"> " + " 发布于:" +timeresult+ "</label></p>\n" + "</td>\n" + "</tr>";
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";

      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  function searchresort() {
    var param = {
      username:$("#usernameData").val(),
      password:$("#passwordData").val(),
      page  : currentPage,
      limit : limit,
    };
    $.post("/resort/searchresortbyuser",param,function(rs){
      var proHtml = "";
      var tablebody = $("#tablebody");
      var pagelink = $("#pagelink");
      for (let i = 0; i < rs.data.length; i++) {
        var timeresult = "未知";
        if (rs.data[i].resortTime.length > 0){
          var resortTime = new Date(rs.data[i].resortTime);
          var currentTime = new Date();
          var timeDiff = currentTime.getTime() - resortTime.getTime();
          var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));
          var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          var weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));
          if (weeksDiff > 0) {
            timeresult = rs.data[i].resortTime.substring(0, 10);
          } else if (daysDiff > 0) {
            timeresult = daysDiff + "天前";
          } else if (hoursDiff > 0) {
            timeresult = hoursDiff +"小时前";
          } else {
            timeresult = "刚刚";
          }
        }
        var imagepath = "http://www.huarenhuzhu.com/resources/image/noimage.png";
        if (rs.data[i].imagepath.length > 0){
          imagepath = rs.data[i].imagepath;
        }
        var title = "未知";
        if (rs.data[i].title.length > 0){
          title = rs.data[i].title;
        }
        var resortType = "未知";
        if (rs.data[i].resortType.length > 0){
          resortType = rs.data[i].resortType;
        }
        var resortName = "未知";
        if (rs.data[i].resortName.length > 0){
          resortName = rs.data[i].resortName;
        }
        var address = "未知";
        if (rs.data[i].address.length > 0){
          address = rs.data[i].address;
        }
        proHtml += "<tr onclick='toresortinfo(" +  rs.data[i].id + ");'>\n"+"<td width=\"120\" height=\"120\"><img class=\"rounded-3\" width=\"120\" height=\"120\" src=\"" +imagepath + "\"></td>\n"+ "<td height=\"100\">\n" + "<h2>" +title+ "<a class=\"btn btn-secondary\" id=\"resortdelete" +rs.data[i].id+ "\" onclick=\"resortdelete(" + rs.data[i].id+ ")\" style=\"float:right;margin-right: 1% !important;\">删除</a>" + "</h2>\n" + "<p><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hash\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\"/>\n" + "</svg><label>" +resortType+ "</label></p>\n" + "<p class=\"\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-geo-alt\" viewBox=\"0 0 16 16\">\n" + "<path d=\"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"/>\n" + "<path d=\"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/></svg>" + address + "<label style=\"float:right\">" + " 发布于"+ timeresult + "</label></p>\n" + "</td>\n" + "</tr>"
      }
      tablebody.html(proHtml);
      proHtml = "";
      var count = rs.count;
      totalPage = Math.ceil(count / limit);
      var classAdd = "";
      if (currentPage == 1){
        classAdd = "disabled";
      }
      proHtml += " <ul class=\"pagination\">\n" + "<li class=\"page-item " + classAdd + "\">\n" + "<a class=\"page-link\" onclick=\"pageprevious();\">\n" + "<span aria-hidden=\"true\">«</span>\n" + "</a>\n" + "</li>";
      classAdd = "";
      if (currentPage == 1){
        classAdd = "active";
      }
      proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(1);\">1</a></li>";
      if (currentPage > 3){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      for (var i = currentPage - 1; i <= currentPage + 1; i++) {
        if (i > 1 && i < totalPage) {
          classAdd = "";
          if (currentPage == i){
            classAdd = "active";
          }
          proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + i + ");\">" + i + "</a></li>";
        }
      }
      if (currentPage < totalPage - 2){
        proHtml += "<li class=\"page-item disabled\"><a class=\"page-link\" \">...</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "active";
      }
      if (totalPage > 1){
        proHtml += "<li class=\"page-item " + classAdd + "\"><a class=\"page-link\" onclick=\"pageindex(" + totalPage + ");\">" + totalPage + "</a></li>";
      }
      classAdd = "";
      if (currentPage == totalPage){
        classAdd = "disabled";
      }
      proHtml += "<li class=\"page-item\">\n" + "<a class=\"page-link " + classAdd + "\" onclick=\"pagenext();\">\n" + "<span aria-hidden=\"true\">»</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">到第<input id=\"pageindex\" style=\"width: 44px;\">页</span>\n" + "</label>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<a class=\"page-link\" onclick=\"pageonclick();\">\n" + "<span aria-hidden=\"true\">确定</span>\n" + "</a>\n" + "</li>\n" + "<li class=\"page-item\">\n" + "<label class=\"page-label\">\n" + "<span aria-hidden=\"true\">" +"共"+ count +"条"+ "</span>\n" + "</label>\n" + "</li>\n" + "</ul>";
      pagelink.html(proHtml);
      proHtml = "";
    })
  }
  var isStarClick = 0;
  function tocontent(index,type) {
    if (isStarClick==1){
      return;
    }
    if (type == 'fraud'){
      window.open("/fraud/selectfraud?id="+ index, "_blank");
    }
    if (type == 'resort'){
      window.open("/resort/selectresort?id="+ index, "_blank");
    }else {
      $.ajaxSettings.async = false;
      $.post("/content/searchfraudorresort",{"index":index},function (rs){
        index = rs.data.contentid;
        type = rs.data.contentType;
      })
      $.ajaxSettings.async = true;
      if (type == 'fraud'){
        window.open("/fraud/selectfraud?id="+ index, "_blank");
      }
      if (type == 'resort'){
        window.open("/resort/selectresort?id="+ index, "_blank");
      }
    }

    isStarClick = 0;
  }
  function toprivate(index) {
    if (isStarClick==1){
      return;
    }
    isStarClick = 0;
  }
  function tosystem(index) {

  }
  function toliveorfraud(index) {
    if (isStarClick==1){
      return;
    }
    isStarClick = 0;
  }
  function tofraudinfo(index) {
    if (isStarClick==1){
      return;
    }
    window.open("/fraud/selectfraud?id="+ index, "_blank");
    isStarClick = 0;
  }
  function toresortinfo(index) {
    if (isStarClick==1){
      return;
    }
    window.open("/resort/selectresort?id="+ index, "_blank");
    isStarClick = 0;
  }
  function contentdelete(id) {
    isStarClick = 1;
    var param = {
      typeid  : id,
      username:$("#usernameData").val(),
      password:$("#passwordData").val()
    }
    $.post("/content/contentdelete",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，数据删除失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，数据删除成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchcontent();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })
  }
  function privatedelete(id) {
    isStarClick = 1;
    var param = {
      typeid  : id,
      username:$("#usernameData").val(),
      password:$("#passwordData").val()
    }
    $.post("/content/privatedelete",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，数据删除失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，数据删除成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchprivate();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })
  }
  function frauddelete(id) {
    isStarClick = 1;
    var param = {
      typeid  : id,
      username:$("#usernameData").val(),
      password:$("#passwordData").val()
    }
    $.post("/fraud/frauddelete",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，数据删除失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，数据删除成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchfraud();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })
  }
  function liveorfrauddelete(id) {
    isStarClick = 1;
    var param = {
      id  : id,
      username:$("#usernameData").val(),
      password:$("#passwordData").val()
    }
    $.post("/liveorfraud/liveorfrauddelete",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，数据删除失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，数据删除成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchliveorfraud();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })
  }
  function resortdelete(id) {
    isStarClick = 1;
    var param = {
      typeid  : id,
      username:$("#usernameData").val(),
      password:$("#passwordData").val()
    }
    $.post("/resort/resortdelete",param,function(rs){
      if (rs.code != 200) {
        $("#messageModalLabel").text("抱歉，数据删除失败");
        $('#messageModal').modal('show');
        setTimeout(function () {
          $('#messageModal').modal('hide');
        }, 3000);
      } else {
        $("#messageModalLabel").text("恭喜，数据删除成功");
        $('#messageModal').modal('show');
        setTimeout(function () {
          searchresort();
          $('#messageModal').modal('hide');
        }, 3000);
      }
      isStarClick = 0;
    })
  }
</script>
</html>
